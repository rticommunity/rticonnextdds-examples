<?xml version="1.0" encoding="UTF-8"?>

<dds xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="https://community.rti.com/schema/6.0.0/rti_recording_service.xsd">
   
    <!-- This example only uses a HelloMsg type, so this configuration
         forces the application to use only HelloMsg --> 
    <types>
        <struct name="HelloMsg">
            <member name="id" type="long" key="true"/>
            <member name="msg" stringMaxLength="256" type="string"/>
        </struct>
    </types>

    <!-- The name of the library, and the function used to create an instance
         of the StorageWriter -->     
    <plugin_library name="StorageLibrary">
        <storage_plugin name="ExamplePlugin">
            <dll>FileStorageWriter</dll>
            <create_function>FileStorageWriter_create_instance</create_function>
        </storage_plugin>
    </plugin_library>
    
    <!--  A definition of a Recording Service instance to run that
          loads a library written in C  -->
    <recording_service name="C_StorageExample">
        <!-- Storage properties. These are passed to the plugin in the 
             plugin_library -->
        <storage>
            <plugin plugin_name="StorageLibrary::ExamplePlugin">
                <property>
                    <value>
                        <element>
                            <name>example.c_pluggable_storage.filename</name>
                            <value>C_PluggableStorage.dat</value>
                            <propagate>1</propagate>
                        </element>
                    </value>
                </property>
            </plugin>
        </storage>
        <!-- Domain Participant, by default in domain 0. Use the 
             -domainIdBase command-line parameter to adjust -->
        <domain_participant name="Domain0">
            <domain_id>0</domain_id>
        </domain_participant>

        <session name="C_StorageSession">
            <!-- Use only the topic and type this example expects -->
            <topic name="Example_C_Storage" participant_ref="Domain0">
                <registered_type_name>HelloMsg</registered_type_name>
            </topic>
        </session>
    </recording_service>
</dds>
